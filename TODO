// what to index?
// for the prefixes => each and every word, including the stop words
// for the contexts
// wordgrams, 
// buy 
// buy oil
// buy oil in 
// buy oil in april
// oil
// oil in
// oil in april
// and other combinations of the words that can be made
// while searching
// to get the context ->> take all the words before the last word, and search the contexts of the prexisting query for the smallest length context that matches it, send that as the context.
// prefix is the last word.
// other option is to send the context as just that previous string.
// we can send both, with a higher weightage for this one.

<div class="col l2 m2 s2 center">
    <div class="grey-text text-lighten-1" style="font-size: 24px;">Avg Profit</div>
    <div class="amber-text" style="font-size: 18px;">{{= val.average_profit }}%</div>
</div>
<div class="col l2 m2 s2 center">
    <div class="grey-text text-lighten-1" style="font-size: 24px;">Avg Loss</div>
    <div class="black-text" style="font-size: 18px;">{{= val.average_loss }}%</div>
</div>

1. up_down - DONE
2. standard deviation days - the superscript issue.
-----------------------------------------------------------
8th november
------------
3. sma_cross - summarizing this - okay here we have a small problem.(we change the way the indicator is named -> simple moving averages cross (3 -> 17)) -> on click it should transform ? so let us see how it looks, also the charting options.(this is pending.)
so we have a regex on the setup, and add a 
we are trying to modify the element itself.
4. remove see-more - DONE
5. d3 charts -> sharable(this is pending) --> so this one is pending, and the other one also (we use the bubble charts, and also summarize the findings, both come in the same thing.)
6. underline or tags for the names of the entities

## gathering of inferences.
## like - let me do better formatting and then 
## title blue-grey, links, limit text, capitalize
## then move to charting ? or what ?
-----------------------------------------------------------
9th november -> was supposed to finish all this today.
------------
7. notable points simple english summary
8. adding icons for calendar events/for the stocks themselves.
9. description of the subindicator can be given below, as well as the indicator -> this i want to finish today
together with range tests, and do the payumoney.
-----------------------------------------------------------
10th november
-------------
10. proximity and rescoring search -> this i will do last.
11. checking the calculation accuracy.
-----------------------------------------------------------

if you want it to work, that is what it will take.
=============================================================
no more features beyond this will be implemented.
current progress is approximately 3 features per day.
based on that timeline, this project should be completed by sunday evening, come what may.
after that we design google ads for one week, or take the decision for climate data -> for the wow factor (max one week => actually both)
=============================================================

# just make it a superscript, you can't solve it all.

--> i think i am within 1 week of getting this done -> maybe if i can manage the d3 and icons, part, then i can leave the proximity scoring for the end -> and that will be the end of all things, and then the checking why all the calculations are wrong.

9. calling it a day.

after this we go for better sorting. 
that will be the end of it.
by this weekend i think this project stage one will be completed.

## these three are the main things.


3.nifty 50 monday -> gives the first two as the closest mondays, but is not giving simple monday -> directly jumps to further shit - this is again about weightage and proximity and nothing more.


6.nifty bank index sets a 3 day high, in 2016 there are only 3 incidences ?

## so if we returned only one ?
## what happens to Reliance when Nasdaq's shit falls by 3 percent.
## if searching for this can provide the result ?
## or we want a result id, and some kind of an entity id as a response -> and use that ?
## could that be simpler ? i think yes.
## so we have to explore that concept.
## but also need a query string response method.
## that's one way.
## i need to build all that then.
## via js-erb.
## query string
## simple correlations for crawlers.
## search by exchange -> dropdown lists of companies
## algorini.com/exchange/company -> search for that company by query string.
## algorini.com/exchanges -> cards
## algorini.com/NASDAQ/AAPL
## algorini.com/exchange/NASDAQ/entity/AAPL

8. for time based -> more weightage for nearness
9. for correlation -> more weightage for profit.


calendar symbol
better presentation for the time data -> need nice charts from d3.
checking the calculation accuracy.
i want to cover this on sunday i.e tomorrow -> i want to finish.

## On the third saturday of the month, Nifty performed well in 2019,2011, and 2012, rising 69% of the times.
## It performed poorly in 2015 and 2016.
## In the present year it has risen 50% of the times.

## Nifty-50 rose in November in 9 out of the last 10 years
## The maximum rises was in 2010, the maximum fall in 2020
## Over the last 10 years, Nifty-50 rose in November 8 times.  

---------------------------------------------------------
1. too many confusing options in the dropdown -> i want the nearest one first - relevance for tuesday -> should be simple tuesday first rather than last tuesday of the month.
2. 2020 is coming in too many time based results
3. cross correlations are not being calculated at all, probably because its a sunday ? -> check for this.
4. What happens to Nifty 50 when Adani Ports sets a 1 week high -- wrongly interpreted as a time based subindicator.
5. tell that it is for the next day.
6. clicking on the pattern's doesn't show the result.
7. What happens to Nifty Bank Index in December(999.99 % is getting considered in this result)
- so we can solve the remaining test and fix these issues first.
- what happens to adani on (on and monday get mixed up in the autocomplete)
- reduce the number of results (5)
- that should be enough.
---------------------------------------------------------
i have to close what today ?
that is the main thing.
---------------------------------------------------------
ON CLICK THE SEARCH MOVE IT ALL UP IMMEDIATELY.
1. trends :Indian-Banks tends to rise on the 1st Thursday of the quarter (Thu 02 Jan) -> this should not have been shown, as its margin is only 52%
2. What happens to Tata Steel when Cac 's volume falls by 1.25x standard deviation (31 Dec 2019) -> giving total and absolute shit.
3. tata steel cac -> shows only one reesult ? why?
6. ongc grasim does not work
7. ongc reliance does not work
8. baja-auto only has 5 years of data ? why.
9. scroll bar shrinks sometimes and shows only one result. (why ?)[FIRST PRIORITY], dropdown bar obscures search bar in mobile view[SECOND PRIORITY -> MOVE THE SEARCH BAR ALL THE WAY TO THE TOP -> THAT'S THE ONLY WAY, NO MARGINS NOTHING.]
10. What happens to Nifty 50 on the last Tuesday of the quarter (14 Jan 2020)(this is not the last tuesday of the quarter.)
11. fire query on space/hitting search, not on every word.
12. What happens to Nifty 50 when Reliance falls by 30% of standard deviation(not showing reliance price.)
13. Show get latest price some place better.
14. What happens to Adidas when Nifty 50 's RSI Indicator moving averages cross (730,28) (10 Jan 2020) - this bracketing should not happen.
15. two dots after reacted negatively.
- quarter issue.
- space query firing.
- integrate clicking on icons for searching also sectors.
- What happens to Adani Ports when Nifty Bank Index 's high rises (17 Jan 2020)(price for bank index was not there on the 17th so it could not have been generated like this, so we need to check this)
- typing nifty-50 should yield thursday(16th) as the first result, it is giving friday (17th), when again there was no value on the 17th but it was just run on the 17th.
- so why is it giving the date on which it was run(check nifty bank index, last date -> that is the first issue actually, check its latest price.)

- currently if a download is runnning, the poller does not run
- and if the job publisher list is not empty, the download does not run.
- we want that the download cycle is run every hour
- it should only download an exchange if at least 2 hours have passed after its closing time
- so we start at that time.
- and if to download the exchange or not is decide at exchange_builder_level itself.
- what about scoring issue.

- basically at this stage if i wanted to know what had happened what do i want to know

---------------------------------------------------------------------
- last week of january, january, last week of the month etc.
- trace -> logging of a score of a complex, if i click on it, i should be able to get the trace of the score (maybe store it on the complex itself  -> yes like this.
- trace -> the exact back calculation of the complex itself -> also store on the complex
- timing logging not working for complex calcultion

---> how to make it easier for the user to understand and use?
-------------------------------------------------------------

- indicator names, subindicator names, and exchange/entity names.
- those can be loaded at startup.
-----------------------------------------------------------------
|- share the result cards somehow ->(facebook, twitter), put the| |chart in the top result, - show the yearwise splitup, as an svg|
|so i can get on with this - ok do this.                        |
-----------------------------------------------------------------

- EXPLORE
- give some randomized company names and indicator name combinations as search results, together with positive and negatives, based on market cap it can be scraped.
- thereafter, we need indicator and subindicator names.
- they should be able to somehow browse the indicators.

- give information about when the latest indicators will be available.

- give trace UI to understand the scoring -> and solve all the reminaing bugs
----------------------------------------------------------------------
ERRORS AND BUG FIXING:
reliance nasdaq 100 - shows only 2 results, when there should be many more.
-----------------------------------------------------------------------
make the full text much faster, how.


--------------------------------------------------------------------
4/4/2020
- share to twitter, share to facebook, pin on pintrest -> to upload the image of the graph to cloudinary, create a video for the publicity, and the banner ads.

- pages to browse by entity, exchange, indicator, subindicator ==> choose these by drop downs, for a given entity, and give the related items.

- solve poller saturation, memory leak issues

- make the graph better and easier to understand.

- solve existing bugs in the UI(run the download everyday, browse around, found bugs, solve them.)

--------------------------------------------------------------------

store in information -> 
top five hits as an array.(just store one complex.)

store in information ->
all combination query hits -> 
store their ids in the information hits -> so that it can be loaded via ajax as suggestions.

## for the exchange -> just load the list of information.

## for indicators also.
## the query will be where, impacted entity id is the one you are looking for.


----------------------------------------------------------------------

MOBILE UI
TEST IF INDICATORS AND ENTITIES ARE PROPERLY CREATED
SHOW INDICATOR ABBREVIATIONS
--- SO WE DO THIS FIRST.
so in the cards we give +/- for that entity -> MAKE THE POSITIVE AND NEGATIVE DISPLAY ON COMBINATIONS

WHY COMBINATION AND ALL SEARCH RESULTS ARE SUCH GARBAGE



// give a clear button
// no query to be fired on backspace ?
// move that search shit
and below we give, combinations
we search for combinations where it is the primary entity -> and show them, together with one random hit from inside the combination.

---------------------------------------------------------------
<!-- better formatting for stock descriptions, lets address this, look into why the characters are not being properly handled server side. -->
<!-- add some space in the graph, between the reacted positively, negatively and the graph itself. -->
<!-- submit to google crawler, make a sitemap -->
<!-- sort out watsapp text not showing correctly -->
<!-- fix the query -->
<!-- show indicators, stocks, as bottom links, on mobile view -->
<!-- make clicking on the exchange(takes to the exchange page?) -->
<!-- also clicking on the industries should work -->
<!-- show stats on all the results, in the cards, dropdown for graph? -->
<!-- load related card only for impacted entity id -->
<!-- on stocks page get rid of underscores from exchnage names -->
<!-- show the background image instead of the entity images, or downlod the entity images -->
<-- increase font size of descriptions -->
