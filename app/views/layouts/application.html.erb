<!DOCTYPE html>
<html>
<head>
  <title>Jafocomp</title>
  <!-- jquery -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <!-- strftime -->
  <script src="https://cdn.jsdelivr.net/npm/strftime@0.10.0/strftime.min.js"></script>

   <!--Import Google Icon Font-->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  
  <!-- Compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/css/materialize.min.css">

  <!-- Compiled and minified JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/js/materialize.min.js"></script>
  
  <!-- underscore js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.9.1/underscore-min.js"></script>


  <!-- timeago -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-timeago/1.6.3/jquery.timeago.min.js"></script>


  <!-- pluralize -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pluralize/7.0.0/pluralize.min.js"></script>


  <!--Let browser know website is optimized for mobile-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <%= csrf_meta_tags %>

  <script type="text/template" id="search_result_template">
    <div class="col l12 m12 s12" style="padding:0px !important;">
      <div class="card">
        <div class="card-content grey-text text-lighten-1" style="padding-bottom:5px !important;">
          <span class="card-title" style="font-weight:600 !important; font-size:26px !important;">
            <!--<time class="timeago" datetime="{{= search_result.triggered_at }}">{{= search_result.triggered_at }}
            </time>,    -->
            Buy Nasdaq when <span class="blue-grey-text">{{= search_result.setup }} </span> 
          </span>
          <!-- from here onwards its going to be the impacts that have to be loaded -->
          {{ first_impact = search_result.impacts[0] }}
          <p class="{{= first_impact.statistics[0].bar_color }}-text text-darken-2" style="font-size:22px; font-weight:600;">{{= first_impact.effect }}</p>
          <div class="row" style="width:50%; margin-top:1rem !important; margin-left:0px !important;">
            <div class="col {{= first_impact.statistics[0].bar_color }} darken-2" style="height:5px; width:{{= first_impact.statistics[0].bar_width}}rem;"></div>
            <div class="col grey lighten-2" style="height:5px; width:{{= first_impact.statistics[0].remaining_bar_width}}rem;"></div>
          </div>
          <!-- ONE WEEK , ONE MONTH AND ONE YEAR LATER -->
          <div class="row additional_info" style="display:none; margin-top: 2rem;">
            <div class="col l4 m4 s4 center">
              <div class="grey-text" style="font-size:22px;">{{= first_impact.statistics[0].time_frame_name }}</div>
              <!--<i class="material-icons {{= first_impact.statistics[0].see_more_icon_color }}">brightness_1</i>-->
              <div class="total up_down">
                <span class="red-text">Falls 25 times out of 45</span>
                <!--
                <span class="total_up green-text"><i class="material-icons" style="vertical-align: bottom;">arrow_drop_up</i>{{= first_impact.statistics[0].total_up }}</span>
                <span class="total_down red-text"><i class="material-icons" style="vertical-align: bottom;">arrow_drop_down</i>{{= first_impact.statistics[0].total_down }}</span>\
                -->
              </div>
            </div>
            <div class="col l4 m4 s4 center">
              <div class="grey-text text-lighten-1"  style="padding-left:1rem;">{{= first_impact.statistics[1].time_frame_name }}</div>
              <!--
              <i class="material-icons {{= first_impact.statistics[0].see_more_icon_color }}">brightness_1</i>
              <div style="display:none;"><i class="material-icons">arrow_drop_down</i></div> -->
              <div class="total up_down">
                <span class="total_up green-text"><i class="material-icons" style="vertical-align: bottom;">arrow_drop_up</i>{{= first_impact.statistics[1].total_up }}</span>
                <span class="total_down red-text"><i class="material-icons" style="vertical-align: bottom;">arrow_drop_down</i>{{= first_impact.statistics[1].total_down }}</span>
              </div>
            </div>
            <div class="col l4 m4 s4 center">
              <div class="grey-text text-lighten-1" style="padding-left:1rem;">{{= first_impact.statistics[2].time_frame_name }}</div>
              <!--<i class="material-icons {{= first_impact.statistics[0].see_more_icon_color }}">brightness_1</i>
              <div><i class="material-icons">arrow_drop_down</i></div>-->
              <div class="total up_down">
                <span class="total_up green-text"><i class="material-icons" style="vertical-align: bottom;">arrow_drop_up</i>{{= first_impact.statistics[2].total_up }}</span>
                <span class="total_down red-text"><i class="material-icons" style="vertical-align: bottom;">arrow_drop_down</i>{{= first_impact.statistics[2].total_down }}</span>
              </div>
            </div>
          </div>
          <!-- STOP LOSS SIMULATOR -->
          <div class="row trade_simulator" style="display:none; margin-top: 1rem;">
            <div class="divider" style="margin-bottom: 2rem;"></div>
            <!-- was here before -->
            {{  _.each(first_impact.statistics,function(val,key,list){  }}
              <div class="{{= val.time_frame_name }}" style="{{= key == 0 ? '' : ''}}">
                <div class="row profit_loss">
                  <div class="col l3 m3 s3 center">
                    <div class="blue-grey-text text-lighten-1"><i class="material-icons"  style="font-size: 24px;">timeline</i></div>
                    <div class="grey-text text-darken-1">{{= val.time_frame_name }}</div>
                  </div>
                  <div class="col l2 m2 s2 center">
                    <div class="grey-text text-lighten-1" style="font-size: 24px;">Avg Profit</div>
                    <div class="amber-text">{{= val.average_profit }}%</div>
                  </div>
                  <div class="col l2 m2 s2 center">
                    <div class="grey-text text-lighten-1" style="font-size: 24px;">Avg Loss</div>
                    <div class="amber-text">{{= val.average_loss }}%</div>
                  </div>
                  <div class="col l2 m2 s2 center">
                    <div class="grey-text text-lighten-1" style="font-size: 24px;">Max Profit</div>
                    <div class="amber-text">{{= val.maximum_profit }}%</div>
                  </div>
                  <div class="col l2 m2 s2 center">
                    <div class="grey-text text-lighten-1" style="font-size: 24px;">Max Loss</div>
                    <div class="amber-text">{{= val.maximum_loss }}%</div>
                  </div>
                </div>
                <div class="divider" style="margin-bottom: 2rem; margin-top: 2rem;"></div>
                <div class="row stop_losses" style="display:none;">
                  {{  _.each(val.stop_losses,function(stop_loss,s_key,s_list){ }}
                    <div class="col l4 m4 s4 center">
                      <div class="grey-text text-lighten-1" style="font-size: 18px;">Trade with {{= stop_loss.name }}</div>
                      <i class="material-icons {{= stop_loss.icon_name == 'attach_money' ? 'amber' : 'black'}}-text">{{= stop_loss.icon_name }}</i>
                    </div>
                  {{ }) }}
                </div>
                
              </div>
            {{ }) }}
          </div>  
        </div>
        <div class="center grey-text text-lighten-1 fs-8" style="font-weight:500; padding-bottom:10px !important;">
          <span class="see_more" style="cursor:pointer;">Up & Down</span>
          <span  style="margin-left: 1rem; margin-right: 1rem;"></span>
          <span class="simulate" style="cursor:pointer;">Stats</span>
          <span  style="margin-left: 1rem; margin-right: 1rem;"></span>
          <span class="simulate" style="cursor:pointer;">Bet On It</span>
        </div>
      </div>
    </div>
  </script>
 

  <!-- STYLES -->
  <style>
    .shadow-demo{
      width: 100%;
      height: 100px;
      margin: 20px auto;  
    }
  </style>  


</head>
<body>


<%= yield %>

</body>
</html>
